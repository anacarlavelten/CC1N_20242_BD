CREATE SCHEMA EST_CASO_I;

USE EST_CASO_I;

CREATE TABLE IF NOT EXISTS FORNECEDORES(
FORN_COD INT PRIMARY KEY,
FORN_NOME VARCHAR(45) NOT NULL,
FORN_RUA VARCHAR(45) NOT NULL,
FORN_NUMRUA INT,
FORN_BAIRRO VARCHAR(45) NOT NULL,
FORN_CIDADE VARCHAR(45) NOT NULL,
FORN_ESTADO VARCHAR(45) NOT NULL,
FORN_PAIS VARCHAR(30) NOT NULL,
FORN_CODPOSTAL VARCHAR(10) NOT NULL,
FORN_TELEFONE VARCHAR(15) NOT NULL,
FORN_CONTATO TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS FILIAIS(
FIL_COD INT PRIMARY KEY,
FIL_NOME VARCHAR(45) NOT NULL,
FIL_RUA VARCHAR(100) NOT NULL,
FIL_NUMRUA INT,
FIL_BAIRRO VARCHAR(50) NOT NULL,
FIL_CIDADE VARCHAR(50) NOT NULL,
FIL_ESTADO VARCHAR(50) NOT NULL,
FIL_PAIS VARCHAR(50) NOT NULL,
FIL_CODPOSTAL VARCHAR(10) NOT NULL,
FIL_CAPACIDADE TEXT NOT NULL);


CREATE TABLE IF NOT EXISTS PRODUTOS(
PROD_COD INT PRIMARY KEY,
PROD_NOME VARCHAR(50) NOT NULL,
PROD_DESCRICAO TEXT NOT NULL,
PROD_ESPECTEC TEXT NOT NULL,
PROD_QUANT DECIMAL(10,3) NOT NULL,
PROD_PRECOUNIT DECIMAL(10,2) NOT NULL,
PROD_UNIDMEDIDA VARCHAR(10) NOT NULL,
PROD_ESTOQ_MIN DECIMAL(10,3) NOT NULL
);

CREATE TABLE IF NOT EXISTS PEDIDOS(
PED_COD INT PRIMARY KEY,
PED_DATA DATE NOT NULL,
PED_HORA TIME NOT NULL,
PED_PREVISAO DATE NOT NULL,
PED_STATUS ENUM('PENDENTE','CONCLUÍDO','EM ESPERA'),
PED_FORNECEDOR INT NOT NULL,
CONSTRAINT FK_FORNECEDOR FOREIGN KEY (PED_FORNECEDOR)
REFERENCES FORNECEDORES(FORN_COD)
);

CREATE TABLE IF NOT EXISTS RECEBIMENTOS(
REC_DATA DATE NOT NULL,
REC_HORA TIME NOT NULL,
REC_QUANT_PROD DECIMAL(10,3),
REC_CONDICAO TEXT NOT NULL,
REC_PEDIDOS INT PRIMARY KEY,
CONSTRAINT FK_PEDIDOS FOREIGN KEY(REC_PEDIDOS) REFERENCES PEDIDOS(PED_COD)
);


CREATE TABLE IF NOT EXISTS PEDIDOS_PRODUTOS(
PDPR_PEDIDOS INT,
PDPR_PRODUTOS INT,
PRIMARY KEY(PDPR_PEDIDOS,PDPR_PRODUTOS),
PDPR_QUANT DECIMAL(10,3) NOT NULL,
CONSTRAINT PDPR_FK_PEDIDOS FOREIGN KEY(PDPR_PEDIDOS) REFERENCES PEDIDOS(PED_COD),
CONSTRAINT PDPR_FK_PRODUTOS FOREIGN KEY(PDPR_PRODUTOS) REFERENCES PRODUTOS(PROD_COD)
);


CREATE TABLE IF NOT EXISTS FILIAIS_PRODUTOS(
FLPR_FILIAL INT,
FLPR_PRODUTOS INT,
PRIMARY KEY(FLPR_FILIAL,FLPR_PRODUTOS),
FLPR_QUANT DECIMAL(10,3) NOT NULL,
CONSTRAINT FLPR_FK_FILIAIS FOREIGN KEY(FLPR_FILIAL) REFERENCES FILIAIS(FIL_COD),
CONSTRAINT FLPR_FK_PRODUTOS FOREIGN KEY(FLPR_PRODUTOS) REFERENCES PRODUTOS(PROD_COD)
);


CREATE TABLE IF NOT EXISTS FORNECEDORES_PRODUTOS(
FRPR_FORNECEDOR INT,
FRPR_PRODUTOS INT,
PRIMARY KEY(FRPR_FORNECEDOR,FRPR_PRODUTOS),
CONSTRAINT FRPR_FK_FORNECEDORES FOREIGN KEY(FRPR_FORNECEDOR)
REFERENCES FORNECEDORES(FORN_COD),
CONSTRAINT FRPR_FK_PRODUTOS FOREIGN KEY(FRPR_PRODUTOS) 
REFERENCES PRODUTOS(PROD_COD)
);

CREATE TABLE IF NOT EXISTS ENDEREÇOS (
ADD_ID INT PRIMARY KEY,
ADD_RUA VARCHAR(45) NOT NULL,
ADD_NUMRUA INT,
ADD_BAIRRO VARCHAR(45) NOT NULL,
ADD_CIDADE VARCHAR(45) NOT NULL,
ADD_ESTADO VARCHAR(45) NOT NULL,
ADD_PAIS VARCHAR(30) NOT NULL,
ADD_CODPOSTAL VARCHAR(10) NOT NULL,
ADD_TELEFONE VARCHAR(15) NOT NULL,
ADD_CONTATO TEXT NOT NULL
);
