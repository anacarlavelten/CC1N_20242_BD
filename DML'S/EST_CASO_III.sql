CREATE SCHEMA EST_CASO_III;

USE EST_CASO_III;

CREATE TABLE IF NOT EXISTS MAQUINAS(
MAQ_COD INT PRIMARY KEY,
MAQ_NOME VARCHAR (50),
MAQ_TEMP_VIDA VARCHAR (40),
MAQ_DATA_COMP DATE,
MAQ_DATA_FIM_GRT DATE
);

CREATE TABLE IF NOT EXISTS REGISTRO_MANUTENÇÃO(
RM_COD INT PRIMARY KEY,
RM_DATA DATE,
RM_DESC TEXT,
RM_MAQ INT,
CONSTRAINT RM_FK_MAQ FOREIGN KEY (RM_MAQ) REFERENCES MAQUINAS(MAQ_COD)
);

CREATE TABLE IF NOT EXISTS PRODUTOS(
PROD_COD INT PRIMARY KEY,
PROD_NOME VARCHAR (45),
PROD_DIMENSOES VARCHAR (45),
PROD_COR VARCHAR(50),
TEMP_FAB_PROD VARCHAR(45),
PROD_EST INT
);

CREATE TABLE IF NOT EXISTS TIPO_ENDEREÇO (
TIEN_ID INT PRIMARY KEY,
TIEN_NOME VARCHAR (45)
);

CREATE TABLE IF NOT EXISTS MAQUINAS_PROD(
MAQUINAS_COD INT,
PRODUTOS_COD INT,
PRIMARY KEY (PRODUTOS_COD,MAQUINAS_COD),
TEMP_USO TIME,
CONSTRAINT MAQ_FK FOREIGN KEY (MAQUINAS_COD) REFERENCES MAQUINAS(MAQ_COD),
CONSTRAINT PROD_FK_MAQ FOREIGN KEY (PRODUTOS_COD) REFERENCES PRODUTOS(PROD_COD)
);

CREATE TABLE IF NOT EXISTS CARGOS(
CARGO_ID INT PRIMARY KEY,
CARGO_NOME VARCHAR(45),
CARGO_FUNÇÃO VARCHAR(45),
CARGO_SALARIO DECIMAL (10,3)
);

CREATE TABLE IF NOT EXISTS TIPO_COMPONENTE(
TICP_ID INT PRIMARY KEY,
TICP_NOME VARCHAR(45),
TICP_QNT DECIMAL (10,3)
);

CREATE TABLE IF NOT EXISTS ENDEREÇOS(
END_ID INT PRIMARY KEY,
END_RUA VARCHAR(45),
END_BAIRRO VARCHAR(45),
END_NUMRUA VARCHAR(45),
END_UF VARCHAR(45),
END_CIDADE VARCHAR(45),
END_PAIS VARCHAR(45),
END_CEP VARCHAR(45),
END_TIPO INT,
CONSTRAINT END_FK_TYPE FOREIGN KEY (END_TIPO) REFERENCES TIPO_ENDEREÇO(TIEN_ID)
);

CREATE TABLE IF NOT EXISTS EMPRESAS(
EMP_CNPJ VARCHAR (30) PRIMARY KEY,
EMP_RAZAOSOCIAL VARCHAR (45),
EMP_ATIVIDADE TEXT,
EMP_NOME VARCHAR (50),
EMP_CONTATO VARCHAR(50),
EMP_ENDEREÇO INT,
CONSTRAINT EMP_FK_END FOREIGN KEY (EMP_ENDEREÇO) REFERENCES ENDEREÇOS (END_ID)
);

CREATE TABLE IF NOT EXISTS TELEFONE_EMP(
TEL_COD INT PRIMARY KEY,
TEL_NUM VARCHAR(30),
TEL_EMP VARCHAR(30),
CONSTRAINT EMP_FK_TEL FOREIGN KEY (TEL_EMP) REFERENCES EMPRESAS(EMP_CNPJ)
);

CREATE TABLE IF NOT EXISTS CLIENTES(
CLI_ID INT PRIMARY KEY,
CLI_DATACAD DATE,
CLI_CONT VARCHAR(30),
CLI_NOME VARCHAR(100),
CLI_EMP VARCHAR(30),
CONSTRAINT CLI_FK_EMP FOREIGN KEY (CLI_EMP) REFERENCES EMPRESAS(EMP_CNPJ)
);

CREATE TABLE IF NOT EXISTS ENCOMENDAS(
ENC_COD INT PRIMARY KEY,
ENC_DATA DATE,
ENC_CLI INT,
CONSTRAINT EN_FK_CLIENTE FOREIGN KEY (ENC_CLI) REFERENCES CLIENTES(CLI_ID)
);

CREATE TABLE IF NOT EXISTS PAGAMENTOS(
PAG_ID INT PRIMARY KEY,
PAG_TOTAL DECIMAL(10,2),
PAG_DESC DECIMAL(10,2),
PAG_DATA DATE NOT NULL,
PAG_PARCELAS INT,
PAG_ENC INT,
CONSTRAINT PAG_FK_ENCOMENDAS FOREIGN KEY (PAG_ENC) REFERENCES ENCOMENDAS(ENC_COD)
);

CREATE TABLE IF NOT EXISTS ENDEREÇO_CLIENTE(
ENDC_ID INT PRIMARY KEY,
ENDC_RUA VARCHAR(45),
ENDC_BAIRRO VARCHAR(45),
ENDC_NUMRUA VARCHAR(45),
ENDC_UF VARCHAR(45),
ENDC_CIDADE VARCHAR(45),
ENDC_PAIS VARCHAR(45),
ENDC_CEP VARCHAR(45),
ENDC_TIPO INT,
ENDC_CLI INT,
CONSTRAINT END_FK_TIPO FOREIGN KEY (ENDC_TIPO) REFERENCES TIPO_ENDEREÇO(TIEN_ID),
CONSTRAINT END_FK_CLI FOREIGN KEY (ENDC_CLI) REFERENCES CLIENTES(CLI_ID)
);

CREATE TABLE IF NOT EXISTS EMPREGADOS(
EMP_MATRICULA INT PRIMARY KEY,
EMP_NOME VARCHAR(100),
EMP_CPF VARCHAR(30),
EMP_ADIM DATE,
EMP_QUAL VARCHAR (45),
EMP_CARGO INT,
EMP_ENDEREÇO INT,
CONSTRAINT EMP_FK_CAR FOREIGN KEY (EMP_CARGO) REFERENCES CARGOS (CARGO_ID),
CONSTRAINT EMP_FK_ENDEREÇO FOREIGN KEY (EMP_ENDEREÇO) REFERENCES ENDEREÇOS (END_ID)
);

CREATE TABLE IF NOT EXISTS PRODUTOS_ENCOMENDAS(
PDEN_PROD_COD INT,
PDEN_ENC_COD INT,
PRIMARY KEY (PDEN_PROD_COD,PDEN_ENC_COD),
PDEN_QUANT DECIMAL (10,3),
CONSTRAINT PROD_FK FOREIGN KEY (PDEN_PROD_COD) REFERENCES PRODUTOS(PROD_COD),
CONSTRAINT ENC_FK FOREIGN KEY (PDEN_ENC_COD) REFERENCES ENCOMENDAS (ENC_COD)
);

CREATE TABLE IF NOT EXISTS PRODUTOS_EMPREGADOS(
EMPREGADO_COD INT,
PRODUTO_ID INT,
PRIMARY KEY (EMPREGADO_COD,PRODUTO_ID),
PREM_HORAS TIME,
CONSTRAINT EMP_FK_PROD FOREIGN KEY (EMPREGADO_COD) REFERENCES EMPREGADOS (EMP_MATRICULA),
CONSTRAINT PROD_FK_EMP FOREIGN KEY (PRODUTO_ID) REFERENCES PRODUTOS (PROD_COD)
);

CREATE TABLE IF NOT EXISTS RECURSOS_ESPEC(
REC_PROD INT PRIMARY KEY,
REC_QTS INT, 
REC_UND VARCHAR (45),
REC_HORAS TIME,
CONSTRAINT PROD_FK_REC FOREIGN KEY (REC_PROD) REFERENCES PRODUTOS (PROD_COD)
);

CREATE TABLE IF NOT EXISTS COMPONENTES(
COMP_ID INT PRIMARY KEY,
COMP_NOME VARCHAR(50),
COMP_UNIDADE VARCHAR (50),
COMP_ESTOQUE VARCHAR (45),
COMP_TIPO INT,
CONSTRAINT COMP_TIP FOREIGN KEY (COMP_TIPO) REFERENCES TIPO_COMPONENTE (TICP_ID)
);

CREATE TABLE IF NOT EXISTS PRODUTOS_COMPONENTES (
PRCOM_PRODUTOS INT,
PRCOM_COMPONENTE INT,
PRIMARY KEY (PRCOM_PRODUTOS,PRCOM_COMPONENTE),
CONSTRAINT PROCOM_FK FOREIGN KEY (PRCOM_PRODUTOS) REFERENCES PRODUTOS (PROD_COD),
CONSTRAINT COMPR_FK FOREIGN KEY (PRCOM_COMPONENTE) REFERENCES COMPONENTES(COMP_ID)
);

CREATE TABLE IF NOT EXISTS FORNECEDORES(
FORN_ID INT PRIMARY KEY,
FORN_PESSO VARCHAR(45),
FORN_NMR_CONT VARCHAR(40),
FORN_EMP VARCHAR(30),
CONSTRAINT FORN_FK_EMP FOREIGN KEY (FORN_EMP) REFERENCES EMPRESAS(EMP_CNPJ)
);

CREATE TABLE IF NOT EXISTS COMPONENTES_FORNECEDORES(
COMPFR_COD INT,
FRCOD_CO INT,
PRIMARY KEY (COMPFR_COD,FRCOD_CO),
COFR_PREÇO DECIMAL (10,3),
CONSTRAINT COMP_FK_COD FOREIGN KEY (COMPFR_COD) REFERENCES COMPONENTES(COMP_ID),
CONSTRAINT FORN_FK_COD FOREIGN KEY (FRCOD_CO) REFERENCES FORNECEDORES(FORN_ID)
);

CREATE TABLE IF NOT EXISTS REGISTRO_RESSUPRIMENTO(
REG_COD INT PRIMARY KEY,
REG_DATA DATE,
REG_QNT_NECES DECIMAL(8,3),
REG_COMP INT,
REG_FORN INT, 
CONSTRAINT COMP_FK_REGISTRO FOREIGN KEY (REG_COMP) REFERENCES COMPONENTES(COMP_ID),
CONSTRAINT FORN_FK_REGISTRO FOREIGN KEY (REG_FORN) REFERENCES FORNECEDORES(FORN_ID)
);

CREATE TABLE IF NOT EXISTS TELEFONE_EMPREGADO(
TLEM_COD INT PRIMARY KEY,
TLEM_NUM VARCHAR(30),
TLEM_EMPREGADO INT,
CONSTRAINT TEL_FK_EMP FOREIGN KEY (TLEM_EMPREGADO) REFERENCES EMPREGADOS(EMP_MATRICULA)
);

-----------------------------------------------------------------------------------------------------
#INSERT MÁQUINAS

INSERT INTO MAQUINAS (MAQ_COD, MAQ_NOME, MAQ_TEMP_VIDA, MAQ_DATA_COMP, MAQ_DATA_FIM_GRT) 
VALUES
(24, 'AB58', '10 anos', '2015-06-10', '2025-06-10'),
(56, 'AC41', '7 anos', '2017-03-15', '2024-03-15'),
(41, 'PO90', '15 anos', '2010-11-20', '2025-11-20'),
(84, 'LI55', '5 anos', '2020-01-01', '2025-01-01'),
(63, 'MP57 E', '20 anos', '2005-08-25', '2025-08-25');

#INSERT REGISTRO_MANUTENÇÃO

INSERT INTO REGISTRO_MANUTENÇÃO (RM_COD, RM_DATA, RM_DESC, RM_MAQ)
VALUES
(250, '2024-09-15', 'Manutenção na parte mecânica', 24),
(570, '2024-10-17', 'Manuetenção na ventilação', 56),
(410, '2024-11-04', 'Manutenção de rotina', 41),
(940, '2024-04-08', 'Manutenção de fios', 84),
(750, '2024-06-04', 'Manutenção de sistema', 63)

#INSERT PRODUTOS

INSERT INTO PRODUTOS (PROD_COD, PROD_NOME, PROD_DIMENSOES, PROD_COR, TEMP_FAB_PROD, PROD_EST)
VALUES
(1, 'Cadeira Escritório', '50x50x100 cm', 'Preto', '30 dias', 100),
(2, 'Mesa de Reunião', '150x70x75 cm', 'Madeira', '45 dias', 50),
(3, 'Luminária LED', '20x20x30 cm', 'Branca', '15 dias', 200),
(4, 'Cafeteira Industrial', '30x30x40 cm', 'Inox', '10 dias', 30),
(5, 'Monitor 24" LED', '60x35x5 cm', 'Preto', '20 dias', 150);

#INSERT TIPO_ENDEREÇO

INSERT INTO TIPO_ENDEREÇO (TIEN_ID, TIEN_NOME)
VALUES
(1, 'Residencial'),
(2, 'Comercial'),
(3, 'Industrial'),
(4, 'Rural'),
(5, 'Governamental');

#INSERT MAQUINAS_PROD

INSERT INTO MAQUINAS_PROD (MAQUINAS_COD, PRODUTOS_COD, TEMP_USO)
VALUES
(1, 1, '02:30:00'),
(1, 2, '01:45:00'),
(2, 3, '04:00:00'),
(3, 4, '03:30:00'),
(5, 5, '01:00:00');

#INSERT CARGOS

INSERT INTO CARGOS (CARGO_ID, CARGO_NOME, CARGO_FUNÇÃO, CARGO_SALARIO)
VALUES
(1, 'Operador de Máquinas', 'Operar as máquinas da linha de produção', 2500.00),
(2, 'Supervisor de Produção', 'Supervisionar a produção diária', 4000.00),
(3, 'Gerente de Recursos Humanos', 'Gerenciar a área de RH', 6000.00),
(4, 'Analista Financeiro', 'Analisar e controlar o fluxo de caixa', 3500.00),
(5, 'Assistente de Marketing', 'Auxiliar nas atividades de marketing', 2500.00);

#INSERT TIPO_COMPONENTE

INSERT INTO TIPO_COMPONENTE (TICP_ID, TICP_NOME, TICP_QNT)
VALUES
(1, 'Parafuso', 500.00),
(2, 'Porca', 300.00),
(3, 'Placa de Circuito', 100.00),
(4, 'Pneu', 200.00),
(5, 'Motor Elétrico', 50.00);

#INSERT ENDEREÇOS

INSERT INTO ENDEREÇOS (END_ID, END_RUA, END_BAIRRO, END_NUMRUA, END_UF, END_CIDADE, END_PAIS, END_CEP, END_TIPO)
VALUES
(1, 'Rua das Palmeiras', 'Centro', '123', 'SP', 'São Paulo', 'Brasil', '01010-010', 2),
(2, 'Av. Brasil', 'Vila Nova', '456', 'RJ', 'Rio de Janeiro', 'Brasil', '20220-020', 1),
(3, 'Rua 5', 'Parque Industrial', '789', 'MG', 'Belo Horizonte', 'Brasil', '30130-030', 3),
(4, 'Rua das Acácias', 'Zona Rural', '101', 'GO', 'Goiânia', 'Brasil', '74000-000', 4),
(5, 'Rua 15', 'Centro', '202', 'BA', 'Salvador', 'Brasil', '40000-000', 2);

#INSERT EMPRESAS

INSERT INTO EMPRESAS (EMP_CNPJ, EMP_RAZAOSOCIAL, EMP_ATIVIDADE, EMP_NOME, EMP_CONTATO, EMP_ENDEREÇO)
VALUES
('12.345.678/0001-90', 'Indústria de Móveis Ltda', 'Fabricação de móveis sob medida', 'Indústria Móveis', '11 4002-8922', 1),
('23.456.789/0001-01', 'Tecnologia e Inovação S.A.', 'Desenvolvimento de software', 'Tech Innovations', '21 3002-9022', 2),
('34.567.890/0001-12', 'Comércio de Alimentos', 'Comércio de alimentos', 'Comercial Alimentos', '31 3502-9122', 3),
('45.678.901/0001-23', 'Auto Peças Ltda', 'Comércio de peças automotivas', 'Auto Peças', '51 4004-9292', 4),
('56.789.012/0001-34', 'Construtora Construi Ltda', 'Construção civil', 'Construtora Construi', '61 3202-9722', 5);

#INSERT TELEFONE_EMP

INSERT INTO TELEFONE_EMP (TEL_COD, TEL_NUM, TEL_EMP)
VALUES
(1, '11 4002-8922', '12.345.678/0001-90'),
(2, '21 3002-9022', '23.456.789/0001-01'),
(3, '31 3502-9122', '34.567.890/0001-12'),
(4, '51 4004-9292', '45.678.901/0001-23'),
(5, '61 3202-9722', '56.789.012/0001-34');

#INSERT CLIENTES

INSERT INTO CLIENTES (CLI_ID, CLI_DATACAD, CLI_CONT, CLI_NOME, CLI_EMP)
VALUES
(1, '2024-05-01', '11 9999-9999', 'João Silva', '12.345.678/0001-90'),
(2, '2024-06-15', '21 8888-8888', 'Maria Oliveira', '23.456.789/0001-01'),
(3, '2024-07-10', '31 7777-7777', 'Carlos Pereira', '34.567.890/0001-12'),
(4, '2024-08-20', '51 6666-6666', 'Ana Costa', '45.678.901/0001-23'),
(5, '2024-09-05', '61 5555-5555', 'Lucas Santos', '56.789.012/0001-34');

#INSERT ENCOMENDAS

INSERT INTO ENCOMENDAS (ENC_COD, ENC_DATA, ENC_CLI)
VALUES
(1, '2024-10-01', 1),
(2, '2024-10-05', 2),
(3, '2024-10-10', 3),
(4, '2024-10-15', 4),
(5, '2024-10-20', 5);

#INSERT PAGAMENTOS

INSERT INTO PAGAMENTOS (PAG_ID, PAG_TOTAL, PAG_DESC, PAG_DATA, PAG_PARCELAS, PAG_ENC)
VALUES
(1, 5000.00, 500.00, '2024-10-01', 3, 1),
(2, 7000.00, 700.00, '2024-10-05', 2, 2),
(3, 3000.00, 300.00, '2024-10-10', 1, 3),
(4, 4500.00, 450.00, '2024-10-15', 3, 4),
(5, 6000.00, 600.00, '2024-10-20', 2, 5);

#INSERT ENDEREÇO_CLIENTE

INSERT INTO ENDEREÇO_CLIENTE (ENDC_ID, ENDC_RUA, ENDC_BAIRRO, ENDC_NUMRUA, ENDC_UF, ENDC_CIDADE, ENDC_PAIS, ENDC_CEP, ENDC_TIPO, ENDC_CLI)
VALUES
(1, 'Rua das Palmeiras', 'Centro', '123', 'SP', 'São Paulo', 'Brasil', '01010-010', 2, 1),
(2, 'Av. Brasil', 'Vila Nova', '456', 'RJ', 'Rio de Janeiro', 'Brasil', '20220-020', 1, 2),
(3, 'Rua 5', 'Parque Industrial', '789', 'MG', 'Belo Horizonte', 'Brasil', '30130-030', 3, 3),
(4, 'Rua das Acácias', 'Zona Rural', '101', 'GO', 'Goiânia', 'Brasil', '74000-000', 4, 4),
(5, 'Rua 15', 'Centro', '202', 'BA', 'Salvador', 'Brasil', '40000-000', 2, 5);

#INSERT EMPREGADOS

INSERT INTO EMPREGADOS (EMP_MATRICULA, EMP_NOME, EMP_CPF, EMP_ADIM, EMP_QUAL, EMP_CARGO, EMP_ENDEREÇO)
VALUES
(101, 'Carlos Almeida', '123.456.789-00', '2023-06-15', 'Operador de Máquinas', 1, 1),
(102, 'Fernanda Souza', '234.567.890-11', '2022-11-01', 'Supervisor de Produção', 2, 2),
(103, 'Roberto Costa', '345.678.901-22', '2021-08-20', 'Gerente de Recursos Humanos', 3, 3),
(104, 'Aline Ferreira', '456.789.012-33', '2020-12-05', 'Analista Financeiro', 4, 4),
(105, 'Juliana Oliveira', '567.890.123-44', '2019-10-10', 'Assistente de Marketing', 5, 5);

#INSERT PRODUTOS_ENCOMENDAS

INSERT INTO PRODUTOS_ENCOMENDAS (PDEN_PROD_COD, PDEN_ENC_COD, PDEN_QUANT)
VALUES
(1, 1, 10.000),
(2, 2, 5.000),
(3, 3, 20.000),
(4, 4, 8.000),
(5, 5, 15.000);

#INSERT PRODUTOS_EMPREGADOS

INSERT INTO PRODUTOS_EMPREGADOS (EMPREGADO_COD, PRODUTO_ID, PREM_HORAS)
VALUES
(101, 1, '02:30:00'),
(102, 2, '03:00:00'),
(103, 3, '04:00:00'),
(104, 4, '02:00:00'),
(105, 5, '01:30:00');

#INSERT RECURSOS_ESPEC

INSERT INTO RECURSOS_ESPEC (REC_PROD, REC_QTS, REC_UND, REC_HORAS)
VALUES
(1, 100, 'Unidades', '02:00:00'),
(2, 200, 'Kg', '03:00:00'),
(3, 150, 'Litros', '04:00:00'),
(4, 50, 'Metros', '01:30:00'),
(5, 80, 'Unidades', '02:30:00');

#INSERT COMPONENTES

INSERT INTO COMPONENTES (COMP_ID, COMP_NOME, COMP_UNIDADE, COMP_ESTOQUE, COMP_TIPO)
VALUES
(1, 'Parafuso A', 'Unidade', '1000', 1),
(2, 'Porca B', 'Unidade', '500', 2),
(3, 'Placa de Circuito', 'Unidade', '200', 3),
(4, 'Pneu C', 'Unidade', '150', 4),
(5, 'Motor Elétrico', 'Unidade', '50', 5);

#INSERT PRODUTOS_COMPONENTES

INSERT INTO PRODUTOS_COMPONENTES (PRCOM_PRODUTOS, PRCOM_COMPONENTE)
VALUES
(1, 1),
(1, 2),
(2, 3),
(3, 4),
(4, 5);

#INSERT FORNECEDORES

INSERT INTO FORNECEDORES (FORN_ID, FORN_PESSO, FORN_NMR_CONT, FORN_EMP)
VALUES
(1, 'José da Silva', '11 9999-9999', '12.345.678/0001-90'),
(2, 'Maria Oliveira', '21 8888-8888', '23.456.789/0001-01'),
(3, 'Carlos Pereira', '31 7777-7777', '34.567.890/0001-12'),
(4, 'Fernanda Costa', '51 6666-6666', '45.678.901/0001-23'),
(5, 'Luís Santos', '61 5555-5555', '56.789.012/0001-34');

#INSERT COMPONENTES_FORNECEDORES

INSERT INTO COMPONENTES_FORNECEDORES (COMPFR_COD, FRCOD_CO, COFR_PREÇO)
VALUES
(1, 1, 1.50),
(2, 2, 0.80),
(3, 3, 5.00),
(4, 4, 10.00),
(5, 5, 250.00);

#INSERT REGISTRO_RESSUPRIMENTO

INSERT INTO REGISTRO_RESSUPRIMENTO (REG_COD, REG_DATA, REG_QNT_NECES, REG_COMP, REG_FORN)
VALUES
(1, '2024-10-01', 500.000, 1, 1),
(2, '2024-10-05', 200.000, 2, 2),
(3, '2024-10-10', 100.000, 3, 3),
(4, '2024-10-15', 50.000, 4, 4),
(5, '2024-10-20', 300.000, 5, 5);

#INSERT TELEFONE_EMPREGADO

INSERT INTO TELEFONE_EMPREGADO (TLEM_COD, TLEM_NUM, TLEM_EMPREGADO)
VALUES
(1, '11 4002-8922', 101),
(2, '21 3002-9022', 102),
(3, '31 3502-9122', 103),
(4, '51 4004-9292', 104),
(5, '61 3202-9722', 105);

#INSERT RECURSOS_RH

INSERT INTO RECURSOS_RH (RECURSOS_ID, RH_QTD_EMP, RH_FOLHADEPAG)
VALUES
(1, 10, 25000.00),
(2, 15, 40000.00),
(3, 12, 30000.00),
(4, 8, 20000.00),
(5, 20, 50000.00);

