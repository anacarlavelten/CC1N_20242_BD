CREATE SCHEMA EST_CASO_III;

USE EST_CASO_III;

CREATE TABLE IF NOT EXISTS MAQUINAS(
MAQ_COD INT PRIMARY KEY,
MAQ_NOME VARCHAR (50),
MAQ_TEMP_VIDA VARCHAR (40),
MAQ_DATA_COMP DATE,
MAQ_DATA_FIM_GRT DATE
);

CREATE TABLE IF NOT EXISTS REGISTRO_MANUTENÇÃO(
RM_COD INT PRIMARY KEY,
RM_DATA DATE,
RM_DESC TEXT,
RM_MAQ INT,
CONSTRAINT RM_FK_MAQ FOREIGN KEY (RM_MAQ) REFERENCES MAQUINAS(MAQ_COD)
);

CREATE TABLE IF NOT EXISTS PRODUTOS (
PROD_COD INT PRIMARY KEY,
PROD_NOME VARCHAR (45),
PROD_DIMENSOES VARCHAR (45),
PROD_COR VARCHAR(50),
TEMP_FAB_PROD VARCHAR(45),
PROD_EST INT
);

CREATE TABLE IF NOT EXISTS MAQUINAS_PROD(
MAQUINAS_COD INT,
PRODUTOS_COD INT,
PRIMARY KEY (PRODUTOS_COD,MAQUINAS_COD)
TEMP_USO TIME,
CONSTRAINT MAQ_FK FOREIGN KEY (MAQUINAS_COD) REFERENCES MAQUINAS(MAQ_COD),
CONSTRAINT PROD_FK_MAQ FOREIGN KEY (PRODUTOS_COD) REFERENCES PRODUTOS(PROD_COD)

CREATE TABLE IF NOT EXISTS CARGOS (
CARGO_ID INT PRIMARY KEY,
CARGO_NOME VARCHAR(45),
CARGO_FUNÇÃO VARCHAR(45),
CARGO_SALARIO DECIMAL (10,3)
);

CREATE TABLE IF NOT EXISTS TIPO_COMPONENTE(
TICP_ID INT PRIMARY KEY,
TICP_NOME VARCHAR(45),
TICP_QNT DECIMAL (10,3)
);

CREATE TABLE IF NOT EXISTS TIPO_ENDEREÇO (
TIEN_ID INT PRIMARY KEY,
TIEN_NOME VARCHAR (45)
);

CREATE TABLE IF NOT EXISTS ENDEREÇOS (
END_ID INT PRIMARY KEY,
END_RUA VARCHAR(45),
END_BAIRRO VARCHAR(45),
END_NUMRUA VARCHAR(45),
END_UF VARCHAR(45),
END_CIDADE VARCHAR(45),
END_PAIS VARCHAR(45),
END_CEP VARCHAR(45),
END_TIPO INT,
CONSTRAINT END_FK_TIPO FOREIGN KEY (END_TIPO) REFERENCES TIPO_ENDEREÇO(TIEN_ID)
);

CREATE TABLE IF NOT EXISTS EMPRESAS(
EMP_CNPJ VARCHAR (30),
EMP_RAZAOSOCIAL VARCHAR (45),
EMP_ATIVIDADE TEXT,
EMP_NOME VARCHAR (50),
EMP_CONTATO VARCHAR(50),
EMP_ENDEREÇO INT,
CONSTRAINT EMP_FK_END FOREIGN KEY (EMP_ENDEREÇO) REFERENCES ENDEREÇOS (END_ID)
);

CREATE TABLE IF NOT EXISTS TELEFONE_EMP(
TEL_COD INT PRIMARY KEY,
TEL_NUM VARCHR(30),
TEL_EMP,
CONSTRAINT EMP_FK_TEL FOREIGN KEY (TEL_EMP) REFERENCES EMPRESAS (EMP_CNPJ)
);

CREATE TABLE IF NOT EXISTS CLIENTES(
CLI_ID INT PRIMARY KEY,
CLI_DATACAD DATE,
CLI_CONT VARCHAR(11),
CLI_NOME VARCHAR(100),
CLI_EMP INT
CONSTRAINT CLI_FK_EMP FOREIGN KEY (CLI_EMP) REFERENCES EMPRESAS (EMP_CNPJ)
);

CREATE TABLE IF NOT EXISTS ENCOMENDAS(
ENC_COD INT PRIMARY KEY,
ENC_DATA DATE,
ENC_CLI INT,
CONSTRAINT EN_FK_CLIENTE FOREIGN KEY (ENC_CLI) REFERENCES CLIENTES(CLI_ID)
);

CREATE TABLE IF NOT EXISTS PAGAMENTOS(
PAG_ID INT PRIMARY KEY,
PAG_TOTAL DECIMAL(10,3),
PAG_DESC DECIMAL(10,3),
PAG_DATA DATE NOT NULL,
PAG_PARCELAS INT,
PAG_ENC INT,
CONSTRAINT PAG_FK_ENCOMENDAS FOREIGN KEY (PAG_ENC) REFERENCES ENCOMENDAS(ENC_COD)
);

CREATE TABLE IF NOT EXISTS ENDEREÇO_CLIENTE (
ENDC_ID INT PRIMARY KEY,
ENDC_RUA VARCHAR(45),
ENDC_BAIRRO VARCHAR(45),
ENDC_NUMRUA VARCHAR(45),
ENDC_UF VARCHAR(45),
ENDC_CIDADE VARCHAR(45),
ENDC_PAIS VARCHAR(45),
ENDC_CEP VARCHAR(45),
ENDC_TIPO INT,
ENDC_CLI INT,
CONSTRAINT END_FK_TIPO FOREIGN KEY (ENDC_TIPO) REFERENCES TIPO_ENDEREÇO(TIEN_ID),
CONSTRAINR END_FK_CLI FOREIGN KEY (END_CLI) REFERENCES CLIENTES(CLI_ID)
);

CREATE TABLE IF NOT EXISTS EMPREGADOS(
EMP_MATRICULA INT PRIMARY KEY,
EMP_NOME VARCHAR(100),
EMP_CPF VARCHAR(30),
EMP_ADIM DATE,
EMP_QUAL VARCHAR (45),
EMP_CARGO INT,
EMP_ENDEREÇO INT,
CONSTRAINT EMP_FK_CAR FOREIGN KEY (EMP_CARGO) REFERENCES CARGOS (CARGO_ID),
CONSTRAINT EMP_FK_ENDEREÇO FOREIGN KEY (EMP_ENDEREÇO) REFERENCES ENDEREÇOS (END_ID)
);

CREATE TABLE IF NOT EXISTS PRODUTOS_ENCOMENDAS
PDEN_PROD_COD INT,
PDEN_ENC_COD INT,
PRIMARY KEY (PDEN_PROD_COD,PDEN_ENC_COD)
PDEN_QUANT DECIMAL (10,3)
CONSTRAINT PROD_FK FOREIGN KEY (PDEN_PROD_COD) REFERENCES PRODUTOS(PROD_COD),
CONSTRAINT ENC_FK FOREIGN KEY (PDEN_ENC_COD) REFERENCES ENCOMENDAS (ENC_COD)
);

CREATE TABLE IF NOT EXISTS PRODUTOS_EMPREGADOS
EMPREGADO_COD INT,
PRODUTO_ID INT,
PRIMARY KEY (EMPREGADO_COD,PRODUTO_ID),
PREM_HORAS TIME,
CONSTRAINT EMP_FK_PROD FOREIGN KEY (EMPREGADO_COD) REFERENCES EMPREGADOS (EMP_MATRICULA),
CONSTRAINT PROD_FK_EMP FOREIGN KEY (PRODUTO_ID) REFERENCES PRODUTOS (PROD_COD)
);

CREATE TABLE IF NOT EXISTS RECURSOS_ESPEC(
REC_PROD INT PRIMARY KEY,
REC_QTS INT, 
REC_UND VARCHAR (45),
REC_HORAS TIME,
CONSTRAINT PROD_FK_REC FOREIGN KEY (REC_PROD) REFERENCES PRODUTOS (PROD_COD)
);

CREATE TABLE IF NOT EXISTS COMPONENTES(
COMP_ID INT PRIMARY KEY,
COMP_NOME VARCHAR(50),
COMP_UNIDADE VARCHAR (50),
COMP_ESTOQUE VARCHAR (45),
COMP_TIPO INT,
CONSTRAINT COMP_TIP FOREIGN KEY (COMP_TIPO) REFERENCES TIPO_COMPONENTE (TICP_ID)
);

CREATE TABLE IF NOT EXISTS PRODUTOS_COMPONENTES (
PRCOM_PRODUTOS INT,
PRCOM_COMPONENTE INT,
PRIMARY KEY (PRCOM_PRODUTOS,PRCOM_COMPONENTE),
CONSTRAINT PROCOM_FK FOREIGN KEY (PRCOM_PRODUTOS) REFERENCES PRODUTOS (PROD_COD),
CONSTRAINT COMPR_FK FOREIGN KEY (PRCOM_COMPONENTE) REFERENCES COMPONENTES(COMP_ID)
);

CREATE TABLE IF NOT EXISTS FORNECEDORES(
FORN_ID INT PRIMARY KEY,
FORN_PESSO VARCHAR(45),
FORN_NMR_CONT VARCHAR(40),
FORN_EMP INT,
CONSTRAINT FORN_FK_EMP FOREIGN KEY (FORN_EMP) REFERENCES EMPRESAS (EMP_CNPJ)
);

CREATE TABLE IF NOT EXISTS COMPONENTES_FORNECEDORES(
COMPFR_COD INT,
FRCOD_CO INT,
PRIMARY KEY (COMPFR_COD,FRCOD_CO),
COFR_PREÇO DECIMAL (10,3),
CONSTRAINT COMP_FK_COD FOREIGN KEY (COMPFR_COD) REFERENCES COMPONENTES(COMP_ID),
CONSTRAINT FORN_FK_COD FOREIGN KEY (FRCOD_CO) REFERENCES FORNECEDORES(FORN_ID)
);

CREATE TABLE IF NOT EXISTS REGISTRO_RESSUPRIMENTO(
REG_COD INT PRIMARY KEY,
REG_DATA DATE,
REG_QNT_NECES DECIMAL(8,3),
REG_COMP INT,
REG_FORN INT, 
CONSTRAINT COMP_FK_REGISTRO FOREIGN KEY (REG_COMP) REFERENCES COMPONENTES(COMP_ID),
CONSTRAINT FORN_FK_REGISTRO FOREIGN KEY (REG_FORN) REFERENCES FORNECEDORES(FORN_ID)
);

CREATE TABLE IF NOT EXISTS TELEFONE_EMPREGADO(
TLEM_COD INT PRIMARY KEY,
TLEM_NUM VARCHR(30),
TLEM_EMPREGADO,
CONSTRAINT TEL_FK_EMP FOREIGN KEY (TLEM_EMPREGADO) REFERENCES EMPREGADOS (EMP_MATRICULA)
);

CREATE TABLE IF NOT EXISTS RECURSOS_RH(
RECURSOS_ID INT PRIMARY KEY,
RH_QTD_EMP VARCHAR DECIMAL (10,0),
RH_FOLHADEPAG DECIMAL(10,3),
);

-----------------------------------------------------------------------------------------------
#DDL'S

#MAQUINAS

ALTER TABLE MAQUINAS ADD MARCA TEXT;

ALTER TABLE MAQUINAS MODIFY COLUMN MARCA VARCHAR(150);

ALTER TABLE MAQUINAS CHANGE COLUMN MARCA MAQ_MARCA VARCHAR(150);

ALTER TABLE MAQUINAS DROP COLUMN MAQ_MARCA;

-----------------------------------------------------------------------------------------------
#REGISTRO_MANUTENÇÃO

ALTER TABLE REGISTRO_MANUTENÇÃO ADD OPERADOR TEXT;

ALTER TABLE REGISTRO_MANUTENÇÃO MODIFY COLUMN OPERADOR VARCHAR(100);

ALTER TABLE REGISTRO_MANUTENÇÃO CHANGE COLUMN OPERADOR RGMN_OPERADOR VARCHAR(100);

ALTER TABLE REGISTRO_MANUTENÇÃO DROP COLUMN RGMN_OPERADOR;


--------------------------------------------------------------------------------------------
#PRODUTOS

ALTER TABLE PRODUTOS ADD PAIS_ORI VARCHAR(10);

ALTER TABLE PRODUTOS MODIFY COLUMN PAIS_ORI VARCHAR(100);

ALTER TABLE PRODUTOS CHANGE COLUMN PAIS_ORI PROD_UF_ORIG VARCHAR(100);

ALTER TABLE PRODUTOS DROP COLUMN PROD_UF_ORIG;

---------------------------------------------------------------------------------------------
#MAQUINAS_PROD

ALTER TABLE MAQUINAS_PROD ADD OPERADOR TEXT;

ALTER TABLE MAQUINAS_PROD MODIFY COLUMN OPERADOR VARCHAR(100);

ALTER TABLE MAQUINAS_PROD CHANGE COLUMN OPERADOR MQPD_OPERADOR VARCHAR(100);

ALTER TABLE MAQUINAS_PROD DROP COLUMN MQPD_OPERADOR;

-------------------------------------------------------------------------------------------
#CARGOS

ALTER TABLE CARGOS ADD INÍCIO VARCHAR(40);

ALTER TABLE CARGOS MODIFY COLUMN INÍCIO DATE;

ALTER TABLE CARGOS CHANGE COLUMN INÍCIO CARGO_INICIO DATE;

ALTER TABLE CARGOS DROP COLUMN CARGO_INICIO;

------------------------------------------------------------------------------------------
#TIPO_COMPONENTE

ALTER TABLE TIPO_COMPONENTE ADD COR TEXT;

ALTER TABLE TIPO_COMPONENTE MODIFY COLUMN COR VARCHAR(50);

ALTER TABLE TIPO_COMPONENTE CHANGE COLUMN COR TICO_COR VARCHAR(50);

ALTER TABLE TIPO_COMPONENTE DROP COLUMN TICO_COR;

------------------------------------------------------------------------------------------
#TIPO_ENDEREÇO

ALTER TABLE TIPO_ENDEREÇO ADD PAIS VARCHAR(10);

ALTER TABLE TIPO_ENDEREÇO MODIFY COLUMN PAIS VARCHAR(50);

ALTER TABLE TIPO_ENDEREÇO CHANGE COLUMN PAIS TIEN_PAIS VARCHAR(50);

ALTER TABLE TIPO_ENDEREÇO DROP COLUMN TIEN_PAIS;

--------------------------------------------------------------------------------------------

#ENDEREÇOS

ALTER TABLE ENDEREÇOS ADD LONGITUDE VARCHAR(100);

ALTER TABLE ENDEREÇOS MODIFY COLUMN LONGITUDE INT;

ALTER TABLE ENDEREÇOS CHANGE COLUMN LONGITUDE END_LOGITUDE INT;

ALTER TABLE ENDEREÇOS DROP COLUMN END_LOGITUDE;

--------------------------------------------------------------------------------------------
#EMPRESAS

ALTER TABLE EMPRESAS ADD PESS_CONT VARCHAR(10);

ALTER TABLE EMPRESAS MODIFY COLUMN PESS_CONT VARCHAR(100);

ALTER TABLE EMPRESAS CHANGE COLUMN PESS_CONT EMP_PESSCONT VARCHAR(100);

ALTER TABLE EMPRESAS DROP COLUMN EMP_PESSCONT;

-------------------------------------------------------------------------------------------
#TELEFONE_EMP

ALTER TABLE TELEFONE_EMP ADD DDD VARCHAR(10);

ALTER TABLE TELEFONE_EMP MODIFY COLUMN DDD INT;

ALTER TABLE TELEFONE_EMP CHANGE COLUMN DDD TEL_EMP_DDD INT;

ALTER TABLE TELEFONE_EMP DROP COLUMN TEL_EMP_DDD;

-------------------------------------------------------------------------------------------
#CLIENTES

ALTER TABLE CLIENTES ADD DATANASC VARCHAR(10);

ALTER TABLE CLIENTES MODIFY COLUMN DATANASC DATE;

ALTER TABLE CLIENTES CHANGE COLUMN DATANASC CLI_DATANASC INT;

ALTER TABLE CLIENTES DROP COLUMN CLI_DATANASC;


--------------------------------------------------------------------------------------------
#ENCOMENDAS

ALTER TABLE ENCOMENDAS ADD HORA VARCHAR(10);

ALTER TABLE ENCOMENDAS MODIFY COLUMN HORA TIME;

ALTER TABLE ENCOMENDAS CHANGE COLUMN HORA ENC_HORA TIME;

ALTER TABLE ENCOMENDAS DROP COLUMN ENC_HORA;


--------------------------------------------------------------------------------------------
#PAGAMENTOS

ALTER TABLE PAGAMENTOS ADD TIPO VARCHAR(10);

ALTER TABLE PAGAMENTOS MODIFY COLUMN TIPO SET("PIX","CRÉDITO","DÉBITO","BOLETO");

ALTER TABLE PAGAMENTOS CHANGE COLUMN TIPO PAG_TIPO SET("PIX","CRÉDITO","DÉBITO","BOLETO");

ALTER TABLE PAGAMENTOS DROP COLUMN PAG_TIPO;


---------------------------------------------------------------------------------------------
#ENDEREÇO_CLIENTE

ALTER TABLE ENDEREÇO_CLIENTE ADD LATUDIDE INT;

ALTER TABLE ENDEREÇO_CLIENTE MODIFY COLUMN LATUDIDE VARCHAR(30);

ALTER TABLE ENDEREÇO_CLIENTE CHANGE COLUMN LATITUDE ENCLI_LAT VARCHAR(30);

ALTER TABLE ENDEREÇO_CLIENTE DROP COLUMN ENCLI_LAT;

----------------------------------------------------------------------------------------------
#EMPREGADOS

ALTER TABLE EMPREGADOS ADD DATANASC VARCHAR(10);

ALTER TABLE EMPREGADOS MODIFY COLUMN DATANASC DATE;

ALTER TABLE EMPREGADOS CHANGE COLUMN DATANASC EMP_DATANASC DATE;

ALTER TABLE EMPREGADOS DROP COLUMN EMP_DATANASC;

-----------------------------------------------------------------------------------------------
#PRODUTOS_ENCOMENDAS


ALTER TABLE PRODUTOS_ENCOMENDAS ADD DATA VARCHAR(10);

ALTER TABLE PRODUTOS_ENCOMENDAS MODIFY COLUMN DATA DATE;

ALTER TABLE PRODUTOS_ENCOMENDAS CHANGE COLUMN DATA PDEN_DATA DATE;

ALTER TABLE PRODUTOS_ENCOMENDAS DROP COLUMN PDEN_DATA;


-----------------------------------------------------------------------------------------------
#PRODUTOS_EMPREGADOS

ALTER TABLE PRODUTOS_EMPREGADOS ADD DIAPROD VARCHAR(20);

ALTER TABLE PRODUTOS_EMPREGADOS MODIFY COLUMN DIAPROD VARCHAR(30);

ALTER TABLE PRODUTOS_EMPREGADOS CHANGE COLUMN DIAPROD PDEMP_DIAPROD VARCHAR(30);

ALTER TABLE PRODUTOS_EMPREGADOS DROP COLUMN PDEMP_DIAPROD;

------------------------------------------------------------------------------------------------
#RECURSOS_ESPEC


ALTER TABLE RECURSOS_ESPEC ADD DIAPROD VARCHAR(20);

ALTER TABLE RECURSOS_ESPEC MODIFY COLUMN DIAPROD VARCHAR(30);

ALTER TABLE RECURSOS_ESPEC CHANGE COLUMN DIAPROD RECES_DIAPROD VARCHAR(30);

ALTER TABLE RECURSOS_ESPEC DROP COLUMN RECES_DIAPROD;


----------------------------------------------------------------------------------------------
#COMPONENTES

ALTER TABLE COMPONENTES ADD COR TEXT;

ALTER TABLE COMPONENTES MODIFY COLUMN COR VARCHAR(50);

ALTER TABLE COMPONENTES CHANGE COLUMN COR COMP_COR VARCHAR(50);

ALTER TABLE COMPONENTES DROP COLUMN COMP_COR;


----------------------------------------------------------------------------------------------
#PRODUTOS_COMPONENTES

ALTER TABLE DESCRIÇÃO ADD DESCRIÇÃO VARCHAR(100);

ALTER TABLE DESCRIÇÃO MODIFY COLUMN DESCRIÇÃO TEXT;

ALTER TABLE DESCRIÇÃO CHANGE COLUMN DESCRIÇÃO PRODCOM_DESC TEXT;

ALTER TABLE DESCRIÇÃO DROP COLUMN PRODCOM_DESC;


---------------------------------------------------------------------------------------------
#FORNECEDORES


ALTER TABLE FORNECEDORES ADD TIPO VARCHAR(100);

ALTER TABLE FORNECEDORES MODIFY COLUMN TIPO TEXT;

ALTER TABLE FORNECEDORES CHANGE COLUMN TIPO FORN_TIPO TEXT;

ALTER TABLE FORNECEDORES DROP COLUMN FORN_TIPO;

----------------------------------------------------------------------------------------------
#COMPONENTES_FORNECEDORES

ALTER TABLE COMPONENTES_FORNECEDORES ADD DESCRIÇÃO VARCHAR(100);

ALTER TABLE COMPONENTES_FORNECEDORES MODIFY COLUMN DESCRIÇÃO TEXT;

ALTER TABLE COMPONENTES_FORNECEDORES CHANGE COLUMN DESCRIÇÃO COMPFOR_DESC TEXT;

ALTER TABLE COMPONENTES_FORNECEDORES DROP COLUMN COMPFOR_DESC;

-----------------------------------------------------------------------------------------------
#REGISTRO_RESSUPRIMENTO

ALTER TABLE REGISTRO_RESSUPRIMENTO ADD DESCRIÇÃO VARCHAR(100);

ALTER TABLE REGISTRO_RESSUPRIMENTO MODIFY COLUMN DESCRIÇÃO TEXT;

ALTER TABLE REGISTRO_RESSUPRIMENTO CHANGE COLUMN DESCRIÇÃO REG_RESS_DESC TEXT;

ALTER TABLE REGISTRO_RESSUPRIMENTO DROP COLUMN REG_RESS_DESC;


----------------------------------------------------------------------------------------------
#RECURSOS_RH

ALTER TABLE RECURSOS_RH ADD FEFRIADOS VARCHAR(100);

ALTER TABLE RECURSOS_RH MODIFY COLUMN FEFRIADOS VARCHAR(50);

ALTER TABLE RECURSOS_RH CHANGE COLUMN FEFRIADOS RECRH_FERIADOS VARCHAR(50);

ALTER TABLE RECURSOS_RH DROP COLUMN RECRH_FERIADOS;


----------------------------------------------------------------------------------------------
#DROP

DROP TABLE RECURSOS_RH;





